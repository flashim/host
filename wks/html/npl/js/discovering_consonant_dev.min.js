function init(){canvas=document.getElementById("canvas");images=images||{};stage=new createjs.Stage(canvas);stage.enableMouseOver(20);loaderWidth=300;var e=20;loaderColor=createjs.Graphics.getRGB(0,0,247);loaderBar=new createjs.Container;bar=new createjs.Shape;bar.graphics.beginFill(loaderColor).drawRect(0,0,1,e).endFill();var t=new createjs.Shape;var n=3;t.graphics.setStrokeStyle(1).beginStroke(loaderColor).drawRect(-n/2,-n/2,loaderWidth+n,e+n).beginFill("#999").drawRect(0,0,loaderWidth,e).endFill();txt=new createjs.Text;txt.x=85;txt.y=3;txt.font="16px Verdana";txt.color="#FFFFFF";loaderBar.x=canvas.width-loaderWidth>>1;loaderBar.y=canvas.height-e>>1;loaderBar.addChild(t,bar,txt);stage.addChild(loaderBar);stage.update();var r=[{src:"images/Bitmap1.png",id:"Bitmap1"},{src:"images/Bottom_Activity_Bar.png",id:"Bottom_Activity_Bar"},{src:"images/Bottom_Activity_Button_Exit.png",id:"Bottom_Activity_Button_Exit"},{src:"images/Bottom_Activity_Button_Home.png",id:"Bottom_Activity_Button_Home"},{src:"images/Bottom_Activity_Button_Replay.png",id:"Bottom_Activity_Button_Replay"},{src:"images/Bottom_Activity_Button_Skip.png",id:"Bottom_Activity_Button_Skip"},{src:"images/cursor.png",id:"cursor"},{src:"images/DC_0000_x.png",id:"DC_0000_x"},{src:"images/DC_0001_w.png",id:"DC_0001_w"},{src:"images/DC_0002_v.png",id:"DC_0002_v"},{src:"images/DC_0003_t.png",id:"DC_0003_t"},{src:"images/DC_0004_z.png",id:"DC_0004_z"},{src:"images/DC_0005_s.png",id:"DC_0005_s"},{src:"images/DC_0006_y.png",id:"DC_0006_y"},{src:"images/DC_0007_r.png",id:"DC_0007_r"},{src:"images/DC_0008_q.png",id:"DC_0008_q"},{src:"images/DC_0009_p.png",id:"DC_0009_p"},{src:"images/DC_0011_n.png",id:"DC_0011_n"},{src:"images/DC_0012_m.png",id:"DC_0012_m"},{src:"images/DC_0013_l.png",id:"DC_0013_l"},{src:"images/DC_0014_k.png",id:"DC_0014_k"},{src:"images/DC_0015_j.png",id:"DC_0015_j"},{src:"images/DC_0016_h.png",id:"DC_0016_h"},{src:"images/DC_0017_f.png",id:"DC_0017_f"},{src:"images/DC_0018_d.png",id:"DC_0018_d"},{src:"images/DC_0019_c.png",id:"DC_0019_c"},{src:"images/DC_0020_b.png",id:"DC_0020_b"},{src:"images/DC_0021_g.png",id:"DC_0021_g"},{src:"images/discoveringconsnants_0000_n.png",id:"discoveringconsnants_0000_n"},{src:"images/discoveringconsnants_0001_d.png",id:"discoveringconsnants_0001_d"},{src:"images/discoveringconsnants_0003_g.png",id:"discoveringconsnants_0003_g"},{src:"images/discoveringconsnants_0004_v.png",id:"discoveringconsnants_0004_v"},{src:"images/discoveringconsnants_0005_childfacepaintsmile.png",id:"discoveringconsnants_0005_childfacepaintsmile"},{src:"images/discoveringconsnants_0010_kidssmilinghappysiblings.png",id:"discoveringconsnants_0010_kidssmilinghappysiblings"},{src:"images/discoveringconsnants_0011_bigstockEducationYoungfemaleteach32472596.png",id:"discoveringconsnants_0011_bigstockEducationYoungfemaleteach32472596"},{src:"images/discoveringconsnants_0013_bigstockPortraitofhappypupillookin46987498.png",id:"discoveringconsnants_0013_bigstockPortraitofhappypupillookin46987498"},{src:"images/discoveringconsnants_0014_bigstockGroupOfYoungFriendsTogethe13885295.png",id:"discoveringconsnants_0014_bigstockGroupOfYoungFriendsTogethe13885295"},{src:"images/discoveringconsnants_0016_z.png",id:"discoveringconsnants_0016_z"},{src:"images/discoveringconsnants_0017_y.png",id:"discoveringconsnants_0017_y"},{src:"images/discoveringconsnants_0018_x.png",id:"discoveringconsnants_0018_x"},{src:"images/discoveringconsnants_0019_w.png",id:"discoveringconsnants_0019_w"},{src:"images/discoveringconsnants_0020_v.png",id:"discoveringconsnants_0020_v"},{src:"images/discoveringconsnants_0021_u.png",id:"discoveringconsnants_0021_u"},{src:"images/discoveringconsnants_0022_t.png",id:"discoveringconsnants_0022_t"},{src:"images/discoveringconsnants_0023_s.png",id:"discoveringconsnants_0023_s"},{src:"images/discoveringconsnants_0024_r.png",id:"discoveringconsnants_0024_r"},{src:"images/discoveringconsnants_0025_q.png",id:"discoveringconsnants_0025_q"},{src:"images/discoveringconsnants_0026_p.png",id:"discoveringconsnants_0026_p"},{src:"images/discoveringconsnants_0027_n.png",id:"discoveringconsnants_0027_n"},{src:"images/discoveringconsnants_0028_m.png",id:"discoveringconsnants_0028_m"},{src:"images/discoveringconsnants_0029_k.png",id:"discoveringconsnants_0029_k"},{src:"images/discoveringconsnants_0030_j.png",id:"discoveringconsnants_0030_j"},{src:"images/discoveringconsnants_0031_l.png",id:"discoveringconsnants_0031_l"},{src:"images/discoveringconsnants_0032_h.png",id:"discoveringconsnants_0032_h"},{src:"images/discoveringconsnants_0033_g.png",id:"discoveringconsnants_0033_g"},{src:"images/discoveringconsnants_0034_f.png",id:"discoveringconsnants_0034_f"},{src:"images/discoveringconsnants_0035_e.png",id:"discoveringconsnants_0035_e"},{src:"images/discoveringconsnants_0036_d.png",id:"discoveringconsnants_0036_d"},{src:"images/discoveringconsnants_0037_c.png",id:"discoveringconsnants_0037_c"},{src:"images/discoveringconsnants_0038_b.png",id:"discoveringconsnants_0038_b"},{src:"images/discoveringconsnants_0040_bigstockCountryScenery28191197.png",id:"discoveringconsnants_0040_bigstockCountryScenery28191197"},{src:"images/DiscoveringConsonants.jpg",id:"DiscoveringConsonants"},{src:"sounds/Conclusion.mp3",id:"Conclusion"},{src:"sounds/Consonant_b.mp3",id:"Consonant_b"},{src:"sounds/Consonants_c.mp3",id:"Consonants_c"},{src:"sounds/Consonants_d.mp3",id:"Consonants_d"},{src:"sounds/Consonants_f.mp3",id:"Consonants_f"},{src:"sounds/Consonants_g.mp3",id:"Consonants_g"},{src:"sounds/Consonants_h.mp3",id:"Consonants_h"},{src:"sounds/Consonants_j.mp3",id:"Consonants_j"},{src:"sounds/Consonants_k.mp3",id:"Consonants_k"},{src:"sounds/Consonants_l.mp3",id:"Consonants_l"},{src:"sounds/Consonants_m.mp3",id:"Consonants_m"},{src:"sounds/Consonants_n.mp3",id:"Consonants_n"},{src:"sounds/Consonants_p.mp3",id:"Consonants_p"},{src:"sounds/Consonants_q.mp3",id:"Consonants_q"},{src:"sounds/Consonants_r.mp3",id:"Consonants_r"},{src:"sounds/Consonants_s.mp3",id:"Consonants_s"},{src:"sounds/Consonants_t.mp3",id:"Consonants_t"},{src:"sounds/Consonants_v.mp3",id:"Consonants_v"},{src:"sounds/Consonants_w.mp3",id:"Consonants_w"},{src:"sounds/Consonants_x.mp3",id:"Consonants_x"},{src:"sounds/Consonants_y.mp3",id:"Consonants_y"},{src:"sounds/Consonants_z.mp3",id:"Consonants_z"},{src:"sounds/Introductionmp3.mp3",id:"Introductionmp3"},{src:"sounds/NF_01.mp3",id:"NF_01"},{src:"sounds/NF_02.mp3",id:"NF_02"},{src:"sounds/NF_03.mp3",id:"NF_03"},{src:"sounds/SFX_correct_spin_01.mp3",id:"SFX_correct_spin_01"},{src:"sounds/SFX_correct_spin_02.mp3",id:"SFX_correct_spin_02"},{src:"sounds/SFX_correct_spin_03.mp3",id:"SFX_correct_spin_03"},{src:"sounds/SFX_mouse_click.mp3",id:"SFX_mouse_click"},{src:"sounds/SFX_parrot_01.mp3",id:"SFX_parrot_01"},{src:"sounds/SFX_parrot_02.mp3",id:"SFX_parrot_02"},{src:"sounds/SFX_parrot_03.mp3",id:"SFX_parrot_03"},{src:"sounds/SFX_parrot_04.mp3",id:"SFX_parrot_04"}];var i=new createjs.LoadQueue(false);i.installPlugin(createjs.Sound);i.on("progress",handleProgress);i.addEventListener("fileload",handleFileLoad);i.addEventListener("complete",handleComplete);i.loadManifest(r);createjs.Ticker.setFPS(30);createjs.Ticker.addEventListener("tick",stage)}function handleProgress(e){bar.scaleX=e.loaded*loaderWidth;txt.text="Loading "+(100*(e.loaded/e.total)).toFixed()+"%";console.log(e.loaded*100)}function handleFileLoad(e){if(e.item.type=="image"){images[e.item.id]=e.result}}function handleComplete(){stage.removeChild(loaderBar);exportRoot=new lib.discovering_consonant;stage.addChild(exportRoot);panelButtons=[exportRoot.home,exportRoot.skip,exportRoot.replay,exportRoot.exit];configClickListeners(panelButtons,true);practice_session_arr=[];practice_session_arr[0]=new AlphabetVO("b","DC_0020_b","Consonant_b");practice_session_arr[1]=new AlphabetVO("c","DC_0019_c","Consonants_c");practice_session_arr[2]=new AlphabetVO("d","DC_0018_d","Consonants_d");practice_session_arr[3]=new AlphabetVO("f","DC_0017_f","Consonants_f");practice_session_arr[4]=new AlphabetVO("g","DC_0021_g","Consonants_g");practice_session_arr[5]=new AlphabetVO("h","DC_0016_h","Consonants_h");practice_session_arr[6]=new AlphabetVO("j","DC_0015_j","Consonants_j");practice_session_arr[7]=new AlphabetVO("k","DC_0014_k","Consonants_k");practice_session_arr[8]=new AlphabetVO("l","DC_0013_l","Consonants_l");practice_session_arr[9]=new AlphabetVO("m","DC_0012_m","Consonants_m");practice_session_arr[10]=new AlphabetVO("n","DC_0011_n","Consonants_n");practice_session_arr[11]=new AlphabetVO("p","DC_0009_p","Consonants_p");practice_session_arr[12]=new AlphabetVO("q","DC_0008_q","Consonants_q");practice_session_arr[13]=new AlphabetVO("r","DC_0007_r","Consonants_r");practice_session_arr[14]=new AlphabetVO("s","DC_0005_s","Consonants_s");practice_session_arr[15]=new AlphabetVO("t","DC_0003_t","Consonants_t");practice_session_arr[16]=new AlphabetVO("v","DC_0002_v","Consonants_v");practice_session_arr[17]=new AlphabetVO("w","DC_0001_w","Consonants_w");practice_session_arr[18]=new AlphabetVO("x","DC_0000_x","Consonants_x");practice_session_arr[19]=new AlphabetVO("y","DC_0006_y","Consonants_y");practice_session_arr[20]=new AlphabetVO("z","DC_0004_z","Consonants_z");activity_arr=[];activity_arr[0]=new AlphabetVO("b","discoveringconsnants_0038_b","Consonant_b");activity_arr[1]=new AlphabetVO("c","discoveringconsnants_0037_c","Consonants_c");activity_arr[2]=new AlphabetVO("d","discoveringconsnants_0001_d","Consonants_d");activity_arr[3]=new AlphabetVO("f","discoveringconsnants_0034_f","Consonants_f");activity_arr[4]=new AlphabetVO("g","discoveringconsnants_0003_g","Consonants_g");activity_arr[5]=new AlphabetVO("h","discoveringconsnants_0032_h","Consonants_h");activity_arr[6]=new AlphabetVO("j","discoveringconsnants_0030_j","Consonants_j");activity_arr[7]=new AlphabetVO("k","discoveringconsnants_0029_k","Consonants_k");activity_arr[8]=new AlphabetVO("l","discoveringconsnants_0031_l","Consonants_l");activity_arr[9]=new AlphabetVO("m","discoveringconsnants_0028_m","Consonants_m");activity_arr[10]=new AlphabetVO("n","discoveringconsnants_0027_n","Consonants_n");activity_arr[11]=new AlphabetVO("p","discoveringconsnants_0026_p","Consonants_p");activity_arr[12]=new AlphabetVO("q","discoveringconsnants_0025_q","Consonants_q");activity_arr[13]=new AlphabetVO("r","discoveringconsnants_0024_r","Consonants_r");activity_arr[14]=new AlphabetVO("s","discoveringconsnants_0023_s","Consonants_s");activity_arr[15]=new AlphabetVO("t","discoveringconsnants_0022_t","Consonants_t");activity_arr[16]=new AlphabetVO("v","discoveringconsnants_0020_v","Consonants_v");activity_arr[17]=new AlphabetVO("w","discoveringconsnants_0019_w","Consonants_w");activity_arr[18]=new AlphabetVO("x","discoveringconsnants_0018_x","Consonants_x");activity_arr[19]=new AlphabetVO("y","discoveringconsnants_0017_y","Consonants_y");activity_arr[20]=new AlphabetVO("z","discoveringconsnants_0016_z","Consonants_z")}function startPracticeSession(){ps_container=new createjs.Container;stage.addChild(ps_container);it=Iterator(practice_session_arr);it.reset();gotoNextScreen()}function loadScreen(e){clearContainer();tmpScreen=practice_session_arr[e.current()].img;ps_container.addChild(new lib[tmpScreen]);centerContainer();tmpSnd=new createjs.Sound.createInstance(practice_session_arr[e.current()].mp3);tmpSnd.addEventListener("complete",function(){delayCall(gotoNextScreen,2300)});delayCall(function(){tmpSnd.play()},500)}function centerContainer(){ps_container.x=(1e3-ps_container.getBounds().width)/2;ps_container.y=(739-ps_container.getBounds().height)/2}function clearContainer(){clearTimer();ps_container.removeAllChildren()}function gotoNextScreen(){if(it.hasNext()){it.next();loadScreen(it)}else{delayCall(function(){clearContainer();startBtn=new lib.start;startBtn.x=400;startBtn.y=365;stage.addChild(startBtn);configClickListener(startBtn,true);startBtn.on("click",function(e){stage.removeChild(startBtn);startActivity()})},100)}}function startActivity(){buildQuestions()}function AlphabetVO(e,t,n){this.letter=e;this.img=t;this.mp3=n}function QuestionVO(e,t,n){this.letter=e;this.mp3=t;this.options=n;this.answered="na"}function getOptions(e){var t=[];var n=activity_arr.shuffleArray();var r=n.locatePropValIndex("letter",e,false);t.push(n[r]);n.splice(r,1);for(var i=0;i<4;i++){t.push(n[i])}n=[];n=t.shuffleArray();return n}function buildQuestions(){var e=[];var t;question_arr=[];var n=0;for(n=0;n<activity_arr.length;n++){t=activity_arr[n].letter;question_arr[n]=new QuestionVO(t,activity_arr[activity_arr.locatePropValIndex("letter",t,false)].mp3,getOptions(t))}e=question_arr.copyArray().shuffleArray();question_arr=e;it=Iterator(question_arr);it.reset();gotoNextActivityScreen()}function loadActivityScreen(e){var t;var n=[{x:0,y:10},{x:150,y:300},{x:300,y:10},{x:450,y:300},{x:600,y:10}];tweens=[];removeCountDownTimer();clearContainer();var r=e.arr()[e.current()].options;for(var i=0;i<r.length;i++){t=new lib[r[i].img];t.indx=e.current();t.regX=t.getBounds().width/2;t.regY=t.getBounds().height/2;t.x=n[i].x+t.regX;t.y=n[i].y+t.regY;t.cursor="pointer";t.correct=r[i].letter==e.arr()[e.current()].letter?true:false;tweens.push({tween:createjs.Tween.get(t),ref:t});t.on("click",function(t){stopCountDownTimer();playSound("SFX_mouse_click");disableClicks(true);if(this.correct){e.arr()[this.indx].answered="correct";playSound("SFX_correct_spin_02");rotateClip()}else{e.arr()[this.indx].answered="incorrect";playSound("NF_01")}delayCall(gotoNextActivityScreen,3500)});ps_container.addChild(t)}centerContainer();tmpSnd=new createjs.Sound.createInstance(e.arr()[e.current()].mp3);tmpSnd.addEventListener("complete",function(){});delayCall(function(){tmpSnd.play()},500);addCountDownTimer(countDownValue,gotoNextActivityScreen)}function gotoNextActivityScreen(){if(it.hasNext()){it.next();loadActivityScreen(it)}else{if(qRepeated){canvasStageRef.onEnd()}else{repeatUnattempted()}qRepeated=true}}function repeatUnattempted(){var e=[];unAttempted_arr=[];for(var t=0;t<question_arr.length;t++){if(question_arr[t].answered=="na"){unAttempted_arr.push(question_arr[t]);e.push(question_arr[t].letter)}}if(unAttempted_arr.length>0){it=Iterator(unAttempted_arr);it.reset();gotoNextActivityScreen()}else{canvasStageRef.onEnd()}}function mergeArr(){for(var e=0;e<unAttempted_arr.length;e++){for(var t=0;t<question_arr.length;t++){if(unAttempted_arr[e].letter==question_arr[t].letter){question_arr.splice(t,1,unAttempted_arr[e])}}}}function report(){var e=0;for(var t=0;t<question_arr.length;t++){if(question_arr[t].answered=="correct")e=e+5}return e}function configClickListener(e,t){if(t){e.on("mouseover",onBtnOver);e.on("mouseout",onBtnOut);e.cursor="pointer";e.mouseChildren=false}else{e.cursor=null;e.removeAllEventListeners()}}function configClickListeners(e,t){var n;for(var r=0;r<e.length;r++){n=e[r];configClickListener(n,t);n.mouseChildren=false}}function disableClicks(e){var t;for(var n=0;n<tweens.length;n++){t=tweens[n].ref;t.mouseEnabled=!e;t.mouseChildren=false}}function onBtnClick(e){}function onBtnOver(e){e.target.gotoAndStop(1)}function onBtnOut(e){e.target.gotoAndStop(0)}function playSound(e,t){createjs.Sound.play(e,createjs.Sound.INTERRUPT_EARLY,0,0,t)}function pauseSound(e){createjs.Sound.pause(e)}function resumeSound(e){createjs.Sound.resume(e)}function rotateClip(){for(var e=0;e<tweens.length;e++){var t=tweens[e].ref;var n=tweens[e].tween;var r=Math.random()*.8+.2;var i=Math.random()>.5?360:-360;createjs.Tween.get(t).to({scaleX:r,scaleY:r,rotation:i},2e3,createjs.Ease.Regular).to({rotation:-i,scaleX:1,scaleY:1},1e3)}}function addCountDownTimer(e,t){txt=new createjs.Text;txt.x=-25;txt.y=60;txt.font="75px Times Roman";txt.color="#FF0000";txt.textAlign="right";stage.addChild(txt);var n=e;countdownTimer=setInterval(function(){if(n<1){txt.text="Time's up!";stopCountDownTimer();delayCall(t,1e3)}else{txt.text=n;n--}},1e3)}function removeCountDownTimer(){stopCountDownTimer();stage.removeChild(txt)}function stopCountDownTimer(){clearInterval(countdownTimer)}function startTimer(e){timeoutID=window.setTimeout(callFunc,2e3,e)}function clearTimer(){window.clearTimeout(timeoutID)}function callFunc(e){clearTimer()}function delayCall(e,t){timeoutID=window.setTimeout(e,t)}function Iterator(e,t){if(!(this instanceof arguments.callee))return new arguments.callee(e,t);var n=-1,r=[];if(!e||typeof e!="object")return;if("splice"in e&&"join"in e){while(r.length<e.length)r.push(r.length)}else{for(p in e)if(e.hasOwnProperty(p))r.push(p)}this.next=function(){if(n+1<r.length){var s=r[n++];return t?s:[s,e[s]]}else throw{name:"StopIteration"}};this.prev=function(){if(n-1>=0){var s=r[n--];return t?s:[s,e[s]]}else throw{name:"StopIteration"}};this.hasNext=function(){return n+1<r.length};this.hasPrev=function(){return n-1>=0};this.reset=function(){n=-1};this.current=function(){return n};this.arr=function(){return e}}var canvas,stage,exportRoot;var canvasStageRef;var images;var loaderBar;var txt;var bar;var loaderWidth;var loaderColor;var introSnd;var panelButtons;var startBtn,practice_session_arr,ps_container,it,tmpScreen,tmpSnd;var activity_arr,activitySound_arr,question_arr,unAttempted_arr;var tweens;var qRepeated=false;var countDownValue=15;canvasStageRef=new createjs.Container;canvasStageRef.onStart=function(e){playSound("Introductionmp3")};canvasStageRef.onPracticeSession=function(e){startBtn=new lib.start;startBtn.x=400;startBtn.y=365;stage.addChild(startBtn);configClickListener(startBtn,true);startBtn.on("click",function(e){stage.removeChild(startBtn);startPracticeSession()})};canvasStageRef.onActivity=function(e){};canvasStageRef.onEnd=function(e){clearContainer();mergeArr();exportRoot.gotoAndPlay(1701)};var countdownTimer;var timeoutID